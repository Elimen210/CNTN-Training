{% load static %}
{% load crispy_forms_tags %}

{% if user.is_authenticated %}
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Profile</title>
    <link rel="stylesheet" href="{% static 'css/landing.css' %}">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <nav class="navbar">
        <header>
            <img class="img" src="{% static 'website_photos/Guetto Logo.png'%}" />
        </header>
        <a class="home" href="{% url 'landing' %}"><span class="text-home"><i class='bx  bx-home'></i><span>Accueil</span></span></a>
        <a class="option" href="#"><span class="text-home"><i class='bxr  bx-contact-book'></i> <span>Pour Toi</span></span></a>
        <a class="option" href="#"><span class="text-home"><i class='bxr  bx-search'></i> <span>Rechercher</span></span></a>
        <a href="{% url 'profile' user.profile.pk %}" class="option"><span class="text-home"><i class='bxr  bx-user-circle'></i><span>Profil</span></span></a>
        <a href="{% url 'settings' %}" class="settings"><span class="text-home"><i class='bxr  bx-user-circle'></i><span>Settings</span></span></a>
        <form method="post" action="{% url 'logout' %}" class="logout">
            {% csrf_token %}
            <a type="submit" href="{% url 'logout' %}" class="logout-text"><span class="text-home"><i class='bx  bx-home'></i><span>Se déconnecter</span></span></a>
        </form>
    </nav>

    <div class="content">
        <div>
            <img class="userimage" src="{{ profile.user_picture.url }}" width="100" height="100">
            <br />
            {% if profile.name and not profile.bio %}
            <h3 class="username">{{ profile.name }}</h3>
            {% endif %}
            {% if profile.bio %}
            <h3 style="font-family: Calibri; font-size: 30px; text-align: center; margin: 0 auto; padding-bottom: 30px; width: 70vw;">{{ profile.name }}</h3>
            <h3 style=" font-family: Calibri; font-size: 15px; text-align: center; margin: 0 auto; border-bottom: 2px solid black; padding-bottom: 30px; width: 70vw; ">{{ profile.bio }}</h3>
            {% endif %}
        </div>
        {% if user.id == profile_user.id %}
        <div>
            <form method="POST" class="post-form">
                {% csrf_token %}
                {{ form | crispy }}
                <br />
                <button type="submit" class="submit">Envoyer</button>
            </form>
        </div>
        {% endif %}
        {% for post in posts %}
        <div class="post-1">
            <p><strong>{{ post.author }}</strong> {{ post.created_on }}</p>
            <p>{{ post.body }}</p>
        </div>
        {% endfor %}
    </div>
</body>
</html>

{% else %}
<link rel="stylesheet" href="{% static 'css/login.css' %}">
<div class="container">
    <p class="text">Vous êtes déjà connecté</p>
    <a class="text" href="{% url 'landing' %}">Retournez sur la page d'accueil</a>
</div>
{% endif %}