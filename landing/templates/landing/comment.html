{% load static %}
{% load crispy_forms_tags %}

<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Comment Session</title>
    <link rel="stylesheet" href="{% static 'css/landing.css' %}">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <script type="text/javascript" src="{% static 'js/login.js' %}"></script>
</head>
<body>
    <nav class="navbar">
        <header>
            <img class="img" src="{% static 'website_photos/Guetto Logo.png'%}" />
        </header>
        <a class="home" href="{% url 'landing' %}"><span class="text-home"><i class='bx  bx-home'></i><span>Accueil</span></span></a>
        <a class="option" href="{% url 'foryoupage' %}"><span class="text-home"><i class='bxr  bx-contact-book'></i> <span>Pour Toi</span></span></a>
        <button class="option" onclick="SearchToggle('search')"><span class="text-home"><i class='bxr  bx-search'></i> <span>Rechercher</span></span></button>
        <a href="{% url 'profile' user.profile.pk %}" class="option"><span class="text-home"><i class='bxr  bx-user-circle'></i><span>Profil</span></span></a>
        <a href="{% url 'settings' %}" class="settings"><span class="text-home"><i class='bxr  bx-user-circle'></i><span>Settings</span></span></a>
        <form method="post" action="{% url 'logout' %}" class="logout">
            {% csrf_token %}
            <button type="submit" href="{% url 'logout' %}" class="logout-text"><span class="text-home"><i class='bx  bx-home'></i><span>Se d√©connecter</span></span></button>
        </form>
    </nav>
    <div class="content">
        <div class="post-1">
            <div style="display: flex;align-items: center; flex-direction: row;gap:1vw;">
                <img class="userimage-home" src="{{ post.author.profile.user_picture.url }}" width="10" height="10">
                <p style="text-decoration: none;"><a href="{% url 'profile' post.author.pk %}" style="color:dodgerblue;"><strong>@{{ post.author }}</strong></a> {{ post.created_on }}</p>
            </div>
            {% if post.image %}
            <img src="{{ post.image.url }}" class="post-image" alt="Post Image">
            {% endif %}
            {% if post.video %}
            <video controls autoplay class="post-video">
                <source src="{{ post.video.url }}" type="video/mp4">
            </video>
            {% endif %}
            <p>{{ post.body }}</p>
            <form method="POST" action="{% url 'like' post.pk %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">
                <button type="submit"><i class='bxr  bx-like'></i><span> {{ post.likes.all.count }}</span></button>
            </form>
        </div>
        <div>
            <form method="POST" class="post-form" value="{{ request.path }}">
                {% csrf_token %}
                {{ form | crispy }}
                <br />
                <button type="submit" class="submit">Envoyer</button>
            </form>
        </div>
        {% for comment in comments %}
        <div class="post-1">
            <div style="display: flex;align-items: center; flex-direction: row;gap:1vw;">
                <img class="userimage-home" src="{{ comment.author.profile.user_picture.url }}" width="10" height="10">
                <p style="text-decoration: none;"><a href="{% url 'profile' post.author.pk %}" style="color:dodgerblue;"><strong>@{{ comment.author }}</strong></a> {{ comment.created_on }}</p>
            </div>
            <p>{{ comment.comment }}</p>
            <form method="POST" action="{% url 'comment-like' comment.pk %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">
                <button type="submit"><i class='bxr  bx-like'></i><span> {{ comment.likes.all.count }}</span></button>
            </form>
        </div>
        {% endfor %}
    </div>
</body>
</html>